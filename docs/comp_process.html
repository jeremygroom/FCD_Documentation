<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>6&nbsp; Process Your Data Locally – Forest Carbon Dashboard Documentation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./faq_troubleshooting.html" rel="next">
<link href="./app_upload.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8da5b4427184b79ecddefad3d342027e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./comp_process.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Process Your Data Locally</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Forest Carbon Dashboard Documentation</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Preface</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app_usage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Dashboard Summary and Use</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_prep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Preparing Your Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app_upload.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Uploading Your Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./comp_process.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Process Your Data Locally</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./faq_troubleshooting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Frequently Asked Questions and Troubleshooting</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./version_info.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Version Information</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#running-the-standalone-code" id="toc-running-the-standalone-code" class="nav-link active" data-scroll-target="#running-the-standalone-code"><span class="header-section-number">6.1</span> Running the standalone code</a></li>
  <li><a href="#sec-stndalone-dnld" id="toc-sec-stndalone-dnld" class="nav-link" data-scroll-target="#sec-stndalone-dnld"><span class="header-section-number">6.2</span> R, RStudio, GitHub, and downloading the files</a>
  <ul class="collapse">
  <li><a href="#sec-stndalone-dnld-zip" id="toc-sec-stndalone-dnld-zip" class="nav-link" data-scroll-target="#sec-stndalone-dnld-zip"><span class="header-section-number">6.2.1</span> Compressed file download</a></li>
  <li><a href="#sec-stndalone-dnld-git" id="toc-sec-stndalone-dnld-git" class="nav-link" data-scroll-target="#sec-stndalone-dnld-git"><span class="header-section-number">6.2.2</span> Clone the GitHub repository</a></li>
  </ul></li>
  <li><a href="#sec-stndalone-files" id="toc-sec-stndalone-files" class="nav-link" data-scroll-target="#sec-stndalone-files"><span class="header-section-number">6.3</span> <em>File Structure</em></a></li>
  <li><a href="#sec-stndalone-outline" id="toc-sec-stndalone-outline" class="nav-link" data-scroll-target="#sec-stndalone-outline"><span class="header-section-number">6.4</span> <em>Code Outline</em></a>
  <ul class="collapse">
  <li><a href="#sec-stndalone-outline-data" id="toc-sec-stndalone-outline-data" class="nav-link" data-scroll-target="#sec-stndalone-outline-data"><span class="header-section-number">6.4.1</span> <em>Data for the Stand-alone Code</em></a></li>
  <li><a href="#sec-stndalone-outline-deets" id="toc-sec-stndalone-outline-deets" class="nav-link" data-scroll-target="#sec-stndalone-outline-deets"><span class="header-section-number">6.4.2</span> <em>Details for Using the Stand-alone Code by Section</em></a></li>
  </ul></li>
  <li><a href="#sec-standalone-mac" id="toc-sec-standalone-mac" class="nav-link" data-scroll-target="#sec-standalone-mac"><span class="header-section-number">6.5</span> Aside: Running the Code on a Mac</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-stndalone" class="quarto-section-identifier"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Process Your Data Locally</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="running-the-standalone-code" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="running-the-standalone-code"><span class="header-section-number">6.1</span> Running the standalone code</h2>
<p>This chapter explains how to download or clone the GitHub repository and then describes all of the files in the repository. It then provides direction for running the stand-alone R code from your computer.</p>
<p>The standalone code is provided so that users may generate their tables and figures without the aid of the Shiny app. We recommend reading this text alongside the opened Stand_Alone.R file. The user needs to make a few changes for the script to work.</p>
</section>
<section id="sec-stndalone-dnld" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="sec-stndalone-dnld"><span class="header-section-number">6.2</span> R, RStudio, GitHub, and downloading the files</h2>
<p>The code base and data files reside in <a href="https://github.com/">GitHub</a>. There are two ways to download all of the code and associated files. You can either download a compressed (zip) file (~ 31 MB) or clone the GitHub repository. If you clone the repository you can easily update the code from the GitHub site in the future.</p>
<section id="sec-stndalone-dnld-zip" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="sec-stndalone-dnld-zip"><span class="header-section-number">6.2.1</span> Compressed file download</h3>
<p>To obtain the compressed file, go to the <a href="https://github.com/jeremygroom/Forest-Carbon-Dashboard.git">GitHub repository</a>, click the green “Code” button above the list of files, and then select the “Download Zip” option (see <a href="#fig-dnldzip" class="quarto-xref">Figure&nbsp;<span>6.1</span></a>). Unzip the folder on your machine and then check out the file structure and follow the below instructions for running the stand-alone version.</p>
<div id="fig-dnldzip" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Location of the downloadable zip file for all files and folders from the GitHub repository.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dnldzip-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/downld.png" class="img-fluid figure-img" alt="Location of the downloadable zip file for all files and folders from the GitHub repository.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dnldzip-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.1: Location of GitHub repository zip download.
</figcaption>
</figure>
</div>
</section>
<section id="sec-stndalone-dnld-git" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="sec-stndalone-dnld-git"><span class="header-section-number">6.2.2</span> Clone the GitHub repository</h3>
<p>To successfully clone the repository onto your machine, you will need to have a program called Git installed on your computer. It may already be installed. There is a bit of a learning curve to getting Git up and going, as well as connecting to GitHub through RStudio. However, there are helpful websites that can smooth the way:</p>
<ul>
<li><a href="https://happygitwithr.com/index.html">Happy Git and GitHub for the useR</a><br>
</li>
<li><a href="https://cfss.uchicago.edu/setup/git-with-rstudio/">Using Git within RStudio</a>.</li>
</ul>
<p>If you are not already using GitHub or similar, getting Git/GitHub/RProject set up may take an hour or two. I recommend reading through Happy Git website carefully and following its instructions. Going slowly is going quickly. You will also need to <a href="https://github.com/signup?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=%2F&amp;source=header-home">create a GitHub account</a>.</p>
<p>Once you have Git set up on your machine and have verified that it is doing what you want you are ready to clone the repository. The following is based on Chapter 16 in Happy Git and Github (specifically 16.2), and assumes that your RStudio can connect to GitHub:<br>
1. Select a location on your computer where you would like a folder containing the code to be placed.<br>
2. Start R studio.<br>
3. Select the following menu options: File &gt; New Project &gt; Version Control &gt; Git<br>
4. In the “Repository URL” paste the URL of the HWP model’s GitHub repository: <a href="https://github.com/jeremygroom/Forest-Carbon-Dashboard.git" class="uri">https://github.com/jeremygroom/Forest-Carbon-Dashboard.git</a><br>
This will automatically populate the blank below the URL with the project name (HWP-C-vR).<br>
5. Click “Create Project”</p>
<p>RStudio will now open the HWP-C-vR.Rproj file for you. You are about ready to run the code. But first, we describe the files you’ve downloaded.</p>
</section>
</section>
<section id="sec-stndalone-files" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="sec-stndalone-files"><span class="header-section-number">6.3</span> <em>File Structure</em></h2>
<p><em>/Forest-Carbon-Dashboard/</em><br>
This folder contains all files associated with the model, including template data, the Shiny application, the stand-alone code and folders, R environment controls, and the RStudio project that runs it all.</p>
<p>Forest-Carbon-Dashboard.Rproj: Open this to operate the Shiny app or run the stand-alone code from your computer.</p>
<p>app.R: This is the main code file that runs the Shiny application.</p>
<p>Stand_Alone.R: This is the main code file for running the stand-alone FCD code.</p>
<p>example.dotx: This is a MS Word file that is used for formatting output tables.</p>
<p>README.md: Information for visitors of the GitHub repository.</p>
<p>renv.loc: R environment information</p>
<p><em>/Forest-Carbon-Dashboard/Data/</em></p>
<p>This folder contains California 2020 and 2021 folders that contain the data used to create the respective RDS files (California.2020.rds, California.2021.rds) used by the app. It also contains the Test California 2021.zip file that can be opened and run through the Stand_Alone.R code.</p>
<p><em>/Forest-Carbon-Dashboard/RCode/</em></p>
<p>This folder contains the code used to create all tables and figures in the app. It also contains the code mentioned in <a href="#fig-LABEL" class="quarto-xref">Figure&nbsp;<span>6.2</span></a> and <a href="#sec-stndalone-outline" class="quarto-xref"><span>Section 6.4</span></a> and <a href="#sec-stndalone-outline-deets" class="quarto-xref"><span>Section 6.4.2</span></a>.</p>
<p><em>/Forest-Carbon-Dashboard/RCode/Shiny_Code/</em></p>
<p>This folder contains code specific for the Shiny app along with some images used by the app. Many of the code files are Shiny modules, which are similar to functions. “Plot_” and “Table_” modules control individual tabs in the Shiny app.</p>
<p><em>/Forest-Carbon-Dashboard/renv/</em></p>
<p>This folder contains R environment variables that the Shiny application (app.r) and stand-alone model (Stand_Alone.R) rely upon. The environmental variables include version information for R and the libraries used. The user can ignore this folder.</p>
<p><em>/Forest-Carbon-Dashboard/Results/</em></p>
<p>This folder contains the subfolder Figures. Some code in Stand_Alone.R will add a Tables folder (see <a href="#sec-stndalone-outline-deets" class="quarto-xref"><span>Section 6.4.2</span></a>). Both contain the output from the Stand_Alone.R code.</p>
<p><em>/Forest-Carbon-Dashboard/rsconnect/</em></p>
<p>This folder contains shinyapps.io deployment information. The user can ignore this folder.</p>
<p><em>/Forest-Carbon-Dashboard/www/</em></p>
<p>This folder contains images used in the Shiny app, primarily logos and such. The user can ignore this folder.</p>
</section>
<section id="sec-stndalone-outline" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="sec-stndalone-outline"><span class="header-section-number">6.4</span> <em>Code Outline</em></h2>
<div id="fig-LABEL" class="quarto-float quarto-figure quarto-figure-center anchored" alt="ALT">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-LABEL-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/Standalone_dependencies.png" class="img-fluid figure-img" alt="ALT">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-LABEL-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.2: Data and code source files associated with Stand_Alone.R
</figcaption>
</figure>
</div>
<p>The Settings section in the standalone code relies on user input for reading data files correctly and sources the Functions.R script. If the user already has an RDS data file on hand, they can set options to skip the RDS-building step of ‘Create RDS File’.</p>
<p>Within the ‘Create RDS File’ step the code runs a QA of the provided data files. The QA_Code.R script reads the Script_Control.xlsx file for setting information to check against the CSV data files. The Excel_to_RDS.R builds the input RDS file from Script_Control.xlsx settings and the CSV data files. If the user provides information about an HWP data set, the Excel_to_RDS.R script will source the HWP_Run.R script to include HWP data in the RDS file. The RDS file is saved locally.</p>
<p>The ‘Read RDS file and load conditions’ section loads the RDS file and obtains settings from the RDS file. The standalone code can proceed with producing tables and figures. The ‘Produce figures and tables’ section sources individual figure and table scripts which each draw upon data from the RDS data file.</p>
<section id="sec-stndalone-outline-data" class="level3" data-number="6.4.1">
<h3 data-number="6.4.1" class="anchored" data-anchor-id="sec-stndalone-outline-data"><span class="header-section-number">6.4.1</span> <em>Data for the Stand-alone Code</em></h3>
<p>The user may supply their own data for the Stand-alone code (see <a href="data_prep.html" class="quarto-xref"><span>Chapter 4</span></a>); this can be a productive way to proceed if the user is running into issues with uploading their data to the app for any reason. To run through the Stand_Alone.R code with a prepared dataset, navigate to the folder <code>\Data\</code> and unzip the file <code>Test California 2021.zip</code>.</p>
</section>
<section id="sec-stndalone-outline-deets" class="level3" data-number="6.4.2">
<h3 data-number="6.4.2" class="anchored" data-anchor-id="sec-stndalone-outline-deets"><span class="header-section-number">6.4.2</span> <em>Details for Using the Stand-alone Code by Section</em></h3>
<p><em>R Environment</em> If the user is opening the Stand_Alone.R file for the first time they should uncomment the code <code>#renv::restore()</code> above the section for Settings and run it. This will load version-specific packages. Mac users should see the final note in this section, <a href="#sec-standalone-mac" class="quarto-xref"><span>Section 6.5</span></a>. Once the packages have been successfully loaded this step should not be necessary again except as the GitHub repository updates the <code>/renv/</code> folder.</p>
<p><em>Settings</em></p>
<p>In the subsection “Enter values”, users must enter the <code>year.use</code> value which is the year of their dataset.<br>
Users must also enter the <code>region.use</code> value, their region name. Note that this will produce text that matches the user’s folder/RDS name.</p>
<p>If the user is loading existing data, the <code>EXISTING.RDS</code> needs to be set to TRUE. The script will look for the resulting RDS file. If <code>EXISTING.RDS</code> is set to FALSE, the script will attempt to read files and generate the RDS (giving it the name defined by <code>DATA.FOLDER.NAME</code>).</p>
<p>If the user is wanting to generate a fresh RDS from their parent data folder, we recommend placing that folder in the repository/project directory folder “Data/”. That will make things operate in a more straightforward manner.</p>
<p>Does the user want to have figure scripts save figures to a results folder? If so, <code>SAVE.PNG</code> option should be set to TRUE. This is an option because the Shiny app relies on the same figure code; there is no point for the figure code to internally save the images (users can download the figures from the app).</p>
<p>The ‘Other settings’ subsection provides R with information on where folders are located. If the user is relying on the project file structure provided by the GitHub repository (recommended) then the user need not alter anything in this sub section.</p>
<p>Leave the <code>SHINY.QA</code> setting at FALSE. This allows the Standalone code to save the RDS file. If TRUE, the RDS file will not be saved. The logic is that when the Shiny code compiles the data and performs the QA checks, there is no sense in having the code save the RDS file to the Shinyapps.io instance. The app user can instead click on a button and download the RDS file.</p>
<p><em>Create RDS file</em></p>
<p>This code may be run whether or not a new RDS file is desired. The code will be skipped if a new RDS is not wanted. If used, the code will rely on the information from above (file names) when it sources the QA_Code.R file. This will run the QA routine and write the QA_Report_Table.csv file. This file can be informative for determining process errors.</p>
<p>The Excel_to_RDS.R script compiles the RDS file from the Script_Control.xlsx file, the CSV files, and (if selected and available) the output HWP files. The settings in the control file, Script_Controls.xlsx, will determine whether the HWP code is run and provide information for processing the tables and figures. The Excel_to_RDS.R script will save the output RDS file to the local directory.</p>
<p><em>Read RDS File and Load Conditions</em></p>
<p>The script reads the RDS file that had been created earlier or was recently created by the code for the previous section. The script also checks to see if the FMRL and LU folders are empty. This information is used to determine which tables and figures to produce below.</p>
<p><em>Produce Figures and Tables</em></p>
<p>The object <code>tabfig.run</code> is important. It will list which tables and figures the QA deems available. If a particular table or figure is not being produced (or produced with a ‘no data’ message) type in <code>tabfig.run</code> to see if the QA prevented the figure’s production, then backtrack to the QA_Report_Table.csv to see why this might be the case.</p>
<p>Code immediately below the definition of the function <code>source.tab.fcn</code> will create the folder <code>\Results\Tables\</code> in which the output tables will be saved.</p>
<p>Almost every figure and table is sourced from a separate file. The exceptions are tables and figures that rely on the same code or function to generate them. Users will likely select to save figure .png files (see above). The table code saves individual XLSX documents.</p>
</section>
</section>
<section id="sec-standalone-mac" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="sec-standalone-mac"><span class="header-section-number">6.5</span> Aside: Running the Code on a Mac</h2>
<p>Mac users may have varying levels of success loading the version-specific libraries with <code>renv::restore()</code> , depending on their usage of R and RStudio in the past on their machines. For myself, I programmed the app on a Windows machine. I downloaded the repository onto my home mac to see how it would go. It required some substantial effort to get things to run. I hope these pointers help. If they don’t, Claude AI was moderately helpful.</p>
<p>Note: You may need to perform configuration changes and load programs via the Mac Terminal window (I did not try the RStudio terminal to run these calls on my mac - it may function identically).</p>
<p><strong><em>Problem: OpenSSL</em></strong></p>
<p>If you get a message that includes something like <code>configure: error: Failed to download OpenSSL sources from Apple. Please install OpenSSL headers before installing PKI.</code> The goal is to define the location of SSL headers for R. I recommend the following steps:</p>
<p>Download the program <a href="https://brew.sh/">Homebrew</a>. The webpage has directions. Once installed, from the Terminal type:</p>
<p><code>brew install openssl</code>. R then needs to know where the SSL libraries are.<br>
In the Terminal, type: <code>brew list openssl@3</code>. This provides paths for different SSL objects In R, I enter</p>
<p><code>Sys.setenv(LDFLAGS = "-L/opt/homebrew/Cellar/openssl@3/lib")</code> Your path (<code>/opt/homebrew/…/lib</code>) may differ.</p>
<p>Then in R &gt;</p>
<p><code>Sys.setenv(CPPFLAGS = "-I/opt/homebrew/Cellar/openssl@3/include")</code></p>
<p><code>Sys.setenv(PKG_CONFIG_PATH = "/opt/homebrew/Cellar/openssl@3/lib/pkgconfig")</code></p>
<p><code>Sys.setenv(PKG_LIBS = "-L/opt/homebrew/Cellar/openssl@3/3.5.2/lib -lssl -lcrypto")</code></p>
<p>Try again in R &gt; <code>renv::restore()</code></p>
<p><strong><em>Problem: RVG</em></strong></p>
<p>If you have trouble loading the package <code>rvg</code>, it could be because the <code>rvg</code> package needs the PNG development headers to compile. To fix, install the program <code>libpng</code> on the Mac: In the terminal, type <code>brew install libpng</code> Then:</p>
<p><code>echo 'export LDFLAGS="-L\$(brew --prefix)/lib \$LDFLAGS"' \&gt;\&gt; \~/.zshrc</code></p>
<p><code>echo 'export CPPFLAGS="-I\$(brew --prefix)/include \$CPPFLAGS"' \&gt;\&gt; \~/.zshrc</code></p>
<p><code>echo 'export PKG_CONFIG_PATH="$(brew --prefix)/lib/pkgconfig:$PKG_CONFIG_PATH" \&gt;\&gt; \~/.zshrc source \~/.zshrc'</code></p>
<p>This hopefully allows the <code>rvg</code> package to successfully load, or progress further in loading.</p>
<p><strong><em>Problem: RVG and PNG</em></strong></p>
<p>When I loaded <code>rvg</code> I received an error message that stated that the compiler couldn’t find the <code>png.h</code> header file, even though I’d installed libpng with Homebrew. Claude gave me several workarounds to try. These steps worked for me:</p>
<p>In the terminal, create the directory <code>.R</code> if it doesn’t exist: <code>mkdir -p ~/.R</code></p>
<p>Create/edit the Makevars file: <code>nano ~/.R/Makevars</code> .</p>
<p>Now that the Nano editor is open, include the lines:</p>
<p><code>CPPFLAGS=-I/opt/homebrew/include</code> and</p>
<p><code>LDFLAGS=-L/opt/homebrew/lib</code> .</p>
<p>(If you are using an Intel Mac, include these lines instead:</p>
<p><code>CPPFLAGS=-I/usr/local/include</code> and</p>
<p><code>LDFLAGS=-L/usr/local/lib</code>.)</p>
<p>Close RStudio and open it up again, and give R the command <code>renv::restore()</code> again. Hopefully everything loads. If not, an AI may be able to help out with a workaround for the issue.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./app_upload.html" class="pagination-link" aria-label="Uploading Your Data">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Uploading Your Data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./faq_troubleshooting.html" class="pagination-link" aria-label="Frequently Asked Questions and Troubleshooting">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Frequently Asked Questions and Troubleshooting</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>